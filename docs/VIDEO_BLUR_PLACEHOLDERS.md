# üé¨ Video Loading Placeholders

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è:
1. **–¶–≤–µ—Ç–æ–≤–æ–π —Ñ–æ–Ω** ‚Äî –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π —Ü–≤–µ—Ç –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞ –≤–∏–¥–µ–æ (rgba —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é 0.2)
2. **–ü–∏–∫—Å–µ–ª—å–Ω—ã–π loading —Å–ø–∏–Ω–Ω–µ—Ä** ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ —á—Ç–æ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏ —É –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3. **–ü–ª–∞–≤–Ω—ã–π fade-in** –≤–∏–¥–µ–æ –∫–æ–≥–¥–∞ –æ–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è (300ms transition)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (~30 –±–∞–π—Ç –Ω–∞ –≤–∏–¥–µ–æ)
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –±–∞–Ω–¥–ª)
- –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –≤–∏–¥–µ–æ

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ

### 1. –ò–∑–≤–ª–µ—á—å –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π —Ü–≤–µ—Ç –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞

–ò—Å–ø–æ–ª—å–∑—É–π ffmpeg + ImageMagick –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ —Ü–≤–µ—Ç–∞:

```bash
# –ò–∑–≤–ª–µ—á—å –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä
ffmpeg -i public/videos/my-video.mp4 -vframes 1 -f image2 frame.jpg

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —Ü–≤–µ—Ç
convert frame.jpg -scale 1x1\! -format "%[pixel:u]" info:
# –í—ã–≤–æ–¥: rgba(123,45,67,1)

# –û—á–∏—Å—Ç–∏—Ç—å
rm frame.jpg
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ `lib/video-placeholders.ts`

```typescript
export const videoPlaceholders = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  my_video: "rgba(123, 45, 67, 0.2)", // 0.2 = 20% –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
} as const
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```tsx
import { videoPlaceholders } from "@/lib/video-placeholders"

<VideoCard
  src="/videos/my-video.mp4"
  title="My Video"
  blurDataURL={videoPlaceholders.my_video}
/>
```

## –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± (–±–∞—Ç—á)

–°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ü–≤–µ—Ç–æ–≤ –≤—Å–µ—Ö –≤–∏–¥–µ–æ:

```bash
#!/bin/bash

echo "// –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ –ø–µ—Ä–≤—ã—Ö –∫–∞–¥—Ä–æ–≤ –≤–∏–¥–µ–æ"
echo "export const videoPlaceholders = {"

for video in public/videos/*.mp4; do
  name=$(basename "$video" .mp4)

  # –ò–∑–≤–ª–µ—á—å –∫–∞–¥—Ä
  ffmpeg -i "$video" -vframes 1 -f image2 temp.jpg -y 2>/dev/null

  # –ü–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —Ü–≤–µ—Ç
  color=$(convert temp.jpg -scale 1x1\! -format "%[pixel:u]" info: | sed 's/srgba/rgba/')
  # –ó–∞–º–µ–Ω–∏—Ç—å –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª –Ω–∞ 0.2
  color=$(echo "$color" | sed 's/,1)/,0.2)/')

  echo "  $name: \"$color\","

  rm temp.jpg
done

echo "} as const"
```

–°–æ—Ö—Ä–∞–Ω–∏ –∫–∞–∫ `generate-colors.sh` –∏ –∑–∞–ø—É—Å—Ç–∏:

```bash
chmod +x generate-colors.sh
./generate-colors.sh > lib/video-placeholders.ts
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### OptimizedVideoPlayer

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–≤–µ—Ç–æ–≤–æ–π placeholder (—á–µ—Ä–µ–∑ `backgroundColor` –≤ `VideoCard`)
2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç pixel loading spinner –ø–æ–≤–µ—Ä—Ö
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `onLoadedData` –≤–∏–¥–µ–æ
4. –î–µ–ª–∞–µ—Ç fade-in –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ opacity transition (300ms)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
VideoCard (—Å–æ–¥–µ—Ä–∂–∏—Ç backgroundColor)
‚îî‚îÄ‚îÄ MorphingMedia
    ‚îî‚îÄ‚îÄ div (—Å backgroundColor={blurDataURL})
        ‚îî‚îÄ‚îÄ OptimizedVideoPlayer
            ‚îú‚îÄ‚îÄ PixelLoadingSpinner (–ø–æ–∫–∞ –≥—Ä—É–∑–∏—Ç—Å—è)
            ‚îî‚îÄ‚îÄ <video> (fade-in –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)
```

### CSS —ç—Ñ—Ñ–µ–∫—Ç—ã

```tsx
// –í VideoCard - —Ü–≤–µ—Ç–æ–≤–æ–π —Ñ–æ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
<div style={{ backgroundColor: blurDataURL || "#000" }}>
  <OptimizedVideoPlayer />
</div>

// –í OptimizedVideoPlayer - fade-in –≤–∏–¥–µ–æ
<video style={{
  opacity: isVideoLoaded ? 1 : 0,
  transition: "opacity 300ms ease-in-out",
}} />
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏

–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: **0.2** (20% –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)

- **–ú–µ–Ω—å—à–µ (0.05-0.1)** ‚Äî –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–π, –µ–¥–≤–∞ –∑–∞–º–µ—Ç–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫
- **–ë–æ–ª—å—à–µ (0.3-0.5)** ‚Äî –±–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç–æ–≤–æ–π —Ñ–æ–Ω
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è** ‚Äî 0.2 –¥–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∏ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `lib/video-placeholders.ts`.

## Troubleshooting

**Placeholder –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `blurDataURL` –ø–µ—Ä–µ–¥–∞–Ω –≤ `VideoCard`
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏–º—è –∫–ª—é—á–∞ –≤ `videoPlaceholders` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º –≤ `blurDataURL={videoPlaceholders.name}`

**–¶–≤–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∏–¥–µ–æ:**
- –ü–µ—Ä–µ—Å—á–∏—Ç–∞–π —Ü–≤–µ—Ç –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–ª–µ—á—å –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π —Ü–≤–µ—Ç")
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤–∏–¥–µ–æ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —á–µ—Ä–Ω–æ–≥–æ/–±–µ–ª–æ–≥–æ fade-in —ç—Ñ—Ñ–µ–∫—Ç–∞

**–°–ø–∏–Ω–Ω–µ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `PixelLoadingSpinner` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `OptimizedVideoPlayer`
- –ü—Ä–æ–≤–µ—Ä—å —É—Å–ª–æ–≤–∏–µ `{!isVideoLoaded && shouldLoad && ...}`
